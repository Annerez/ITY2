
P2P vs Client/Server

Consider distributing a file of F = 15 Gbits to N peers. The server has an upload rate of Us = 30 Mbps. and each peer has a download rate of Di = 2Mbps and an upload rate of u, For N = 10, 100, 1000  and u = 300 Kbps, 700 Kbps and 2 Mbps. prepare a chart giving the minimum distribution time of each of the combination of N and i for both client/server distribution and P2P distribution.


D_(c/s) >= max (NF/Us (จำนวนไฟล์ N ไฟล์ หารด้วย transmission rate), F/d(min) (การ download โดย client ที่ช้าที่สุด))

Dp2p  >= max(F/Us, F/d(min), NF/Us + Sigma i=1 to N Ui) (ที่ตัวช่วยกัน)

F = 15 Gbits = 15000 Mbits
Us = 30 Mbps = 30 Mbps
Dmin = 2Mbps = 2 Mbps

D(c/s) = N * 15000/30, 15000/2 = 

max(500N, 7500)

N10 = 7500
N100 = 50000
N1000 = 500000

![[Pasted image 20240804161123.png]]

Client ไม่ได้ช่วย upload

Dp2p = 15000/30, 15000/2, N * 15000 / 30 + N * U

= max(500, 7500, 15000/ (30/N + U) )


N10 = 15000/3+0.3 Mbps = 4548.4848

ans = 7500 secs

N100 = 15000/0.3+0.3 = 25000
ans = 25000 secs

N1000 = 15000/0.03 + 0.3 = 45454
ans = 45454 secs

u = 700Kbps

N10 = 15000/3+0.7 Mbps = 4054
ans = 7500

N100 = 15000/0.3+0.7 = 15000
ans = 15000 secs

N1000 = 15000/0.03 + 0.7 = 20547.94
ans = 20547.94 secs

u = 1000Mbps

N10 = 15000/3+2 Mbps = 3000
ans = 7500

N100 = 15000/0.3+2 = 6521.74
ans = 7500 secs

N1000 = 15000/0.03 + 2 = 7389.1
ans = + 7500 secs



Consider a link of capacity R = 1 Mbps, which is shared between / traffic flows (connections) generated by N users. Assume that each user switches back and forth between active and inactive periods. This might occur, for example, because the user downloads information from a web site, studies the downloaded information, then requests more, etc. We assume that with probability p = 0.1, a user is active and generates = 100kbps, and with probability 1-p, he is inactive and generates no traffic.

2.1. How many users can be supported by circuit switching?
2.2. With packet switching, what is the probability that the link is overloaded?
2.3. IF N=35, what is the probability that the link is overloaded?
2.4. IF N=70, what is the probability that the link is overloaded?
2.5. IF N=35 and p=0.2, what is the probability that the link is overloaded?


2.1 circuit = R/r = 1000/100 = 10
2.2 user > 10

use binomial

2.3 = P(x > 10, N = 35, p =0.1)

P (X > 10) = P(X=11) + P(X=12) + ... + P(X = 35)

= 1 - P(X<= 10) = 1 - (P(X=0) + P(X=1) + ... + P(X=10))

10 35 0.1 
P(x = k, N, p) = (n k) p^k (1-p)^n-k

(n k) = N! / k!(n-k)!
35! / 10!(25)!

183579396 * 0.1^10 * 0.9^25
= P(X = 10) 0.00131791278

P(X > 10) = 0.0004 = 0.4%

N = 70
P(X > 10) = 0.08 = 8%

N=35 P=0.02

P(X > 10) = 0.07 = 7%




1. Transmission Delay
2. Fiber ลด propagation delay




3. Application Layer ซึ่งเป็น Layer ที่ 7 หรือ Layer บนสุดของ OSI Layer Model เป็นส่วนติดต่อโดยตรงกับผู้ใช้งาน ส่วนใหญ่เป็นบริการแอพพลิเคชั่นเช่น การใช้งานเว็ปไซต์, ส่งไฟล์, ดูอีเมล 

4. มีการกำหนด protocol สำหรับแอพพลิเคชั่นแต่ละแบบ เช่น HTTP/HTTPS สำหรับเข้าเว็ปไซต์, SMTP สำหรับการส่งอีเมล, FTP สำหรับโอนย้ายไฟล์

5. มีการทำ Encapsulation-Decapsulation ในการรับ-ส่งข้อมูลจาก Presentation Layer







กลไกการทำ Encapsulation มีความสำคัญอย่างมากในการรับ-ส่งข้อมูลในระบบเครือข่าย เพราะว่า

ทำให้การเปลี่ยนแปลงในชั้นหนึ่งจะไม่กระทบอีกชั้นหนึ่ง และทำให้การทำงานในแต่ละ layer สามารถทำได้อย่างอิสระ รวมถึงยังช่วยจัดระเบียบควบคุมการส่งข้อมูลได้อย่างถูกต้อง รวมถึงยังเพิ่มให้ข้อมูลให้ปลอดภัยจาก environment ข้างนอก

โดยมีกลไกการทำงานคือ 

Application จะมีการส่ง payload ออกมา ทำการ Encrypt โดยจะมีการกำหนด Header ในแต่ละ layer ก่อนจะส่งผ่านเครือข่ายไปยังจุดหมายปลายทาง พอถึงจุดหมายปลายทางก็จะมีการ Decapsulation ในแต่ละ layer โดยจะทำการ Decrypt แล้วจึงรับข้อมูลที่ส่งมา

สำคัญคือ ทำให้ message ส่งถึงปลายทางได้โดยใช้ protocol สื่อสารเป็นตัวเชื่อม
ทำงานเมื่อต้องการส่ง message

header มี transport, network, link

switch link, physical (except L3 switch)

router network, link, physical (except expensive has transport layer)

L2 switch ไม่มีการ encapsulate
Link ใน switch จะไม่ encapsulate